<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="interiorMapper">
	<resultMap type="interior" id="interiorResultSet">
		<result column="INTERIOR_NO" property="interiorNo"/>
		<result column="INTE_CATE" property="inteCate"/>
		<result column="INTERIOR_TITLE" property="interiorTitle"/>
		<result column="INTERIOR_CO" property="interiorCo"/>
		<result column="INTERIOR_PRICE" property="interiorPrice"/>
		<result column="COUNT" property="count"/>
		<result column="INTERIOR_DETAIL" property="interiorDetail"/>
		<result column="SELL" property="sell"/>
		<result column="STATUS" property="status"/>
		
		<result column="FILE_NO" property="fileNo"/>
		<result column="ORIGIN_NAME" property="originName"/>
		<result column="CHANGE_NAME" property="changeName"/>
		<result column="FILE_PATH" property="filePath"/>
		<result column="FILE_LEVEL" property="fileLevel"/>

		<result column="WON" property="won"/>
	</resultMap>

  	<!-- 내가 찜한 인테리어 갯수 -->
	<select id="myDibsInteriorCount" parameterType="_int" resultType="_int">
		SELECT 
				COUNT(1)
		  FROM 
		  		DIBS
		 WHERE
		 		USER_NO = #{userNo}
		   AND
		   		INTERIOR_NO IS NOT NULL
		   AND 
		   		STATUS = 'Y'
	</select>
	
	<select id="selectDibsInteriors" resultMap="interiorResultSet">
		SELECT 
				INTERIOR_NO
			  , INTERIOR_TITLE
			  , INTERIOR_CO
			  , INTERIOR_PRICE
			  , FILE_PATH
			  , ORIGIN_NAME
		  FROM 
				INTERIOR
		  JOIN 
				INTERIOR_FILE USING (INTERIOR_NO)
		  JOIN 
				DIBS D USING (INTERIOR_NO)
		 WHERE 
				FILE_LEVEL = 1
		   AND 
		   		INTERIOR_NO IS NOT NULL
		   AND 
		   		USER_NO = #{userNo}
		   AND 
		   		D.STATUS = 'Y'
	</select>
	
</mapper>
